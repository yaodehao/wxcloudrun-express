<!DOCTYPE html><html><head>	<meta charset="utf-8"/>	<meta HTTP-EQUIV="pragma" CONTENT="no-cache">	<meta HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate"> 	<meta HTTP-EQUIV="expires" CONTENT="0">	  	<meta http-equiv="X-UA-Compatible" content="ie=edge,chrome" />			<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,minimal-ui" />	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@6.2.95/css/materialdesignicons.min.css" >	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vuetify@2.6.1/dist/vuetify.min.css" ><script type="text/javascript">		var sn=143616;	//n分钟,数字		var dayStr1='20211219';	//今天	var dayStr2=dayStr1.substr(0,4)+'-'+dayStr1.substr(4,2)+'-'+dayStr1.substr(6,2);		var indexQS='vuetest';	//QUERY_STRING_UNESCAPED	var testpage='vt_control',SysTmp='vuetest';	var g_username='tester',g_truename='测试人',g_acl='',g_logintype='test',g_log='',g_ddConfigOK=false,g_mem_ID=0,g_dw_name='';	var	gv_db='';//后台数据库	var	tabmax=6;//电脑tab最大数，手机为3	var myColors=['primary','teal','warning','error','success']; 		var	g_url='http://hmxx.0752app.cn/';	var	vue_class_arr= []; //控件数组	var	vue_parm=[]; //控件c参数			var	app;		</script><title>城乡综合治理协同工作平台</title></head><script>	//个性化全局变量var appSN='town' ,g_sysName='城乡治理',	appColor='blue darken-4',	homepage='vt_home_'+appSN;var g_corpId='ww63c33f18de6ce801';	//2：divider，3：url，4：特殊vue，0:默认loadvue  ,5使用onclick vuefile	，6 loadVueParm，带三参数，字符串var TopMenu1=[{type:0,tag:"网格管理",vue:"vt_grid",color:"blue darken-2",icon:"mdi-grid-large",name:"网格管理"},{type:0,tag:"巡检对象",vue:"vt_xc_obj",color:"blue darken-2",icon:"mdi-target",name:"巡检对象"},{type:6,tag:"全民城管",vue:"vt_snapshot_qm",color:"primary",   icon:"mdi-camera", name:"全民城管",p1:appSN,p2:0,p3:3},{type:0,tag:"工作团队",vue:"vt_team",color:"red", icon:"mdi-account-multiple",name:"工作团队"},{type:0,tag:"自查自纠",vue:"vt_zicha",color:"red",icon:"mdi-map-marker-check-outline",name:"自查自纠"},{type:0,tag:"隐患管理",vue:"vt_risk",color:"red", icon:"mdi-shield-check",name:"隐患管理"},{type:6,tag:"专项工作",vue:"vt_task",color:"red",icon:"mdi-clock-check-outline",name:"专项工作",p1:appSN,p2:0,p3:2},{type:6,tag:"督办事项",vue:"vt_task",color:"red",icon:"mdi-file-clock",         name:"督办事项",p1:appSN,p2:0,p3:1},{type:6,tag:"整改通知",vue:"vt_task",color:"red",icon:"mdi-shield-check",       name:"整改通知",p1:appSN,p2:0,p3:3},{type:0,tag:"联络群组",vue:"vt_callObj",color:"red", icon:"mdi-handshake",name:"联络群组"},{type:6,tag:"阅签信息",vue:"vt_richText",color:"blue darken-2",icon:"mdi-account-edit",name:"阅签信息",p1:appSN,p2:0,p3:9},{type:6,tag:"数据看板",vue:"vt_kpiBoard",color:"red", icon:"mdi-file-chart-outline",name:"数据看板",p1:appSN,p2:0,p3:4},{type:0,tag:"应急物资",vue:"vt_supplies",color:"blue darken-2",icon:"mdi-baby-carriage",name:"应急物资"},{type:6,tag:"应急预案",vue:"vt_richText",color:"blue darken-2",icon:"mdi-file-table-outline", name:"应急预案",p1:appSN,p2:0,p3:4},{type:0,tag:"应急演练",vue:"vt_drill",color:"blue darken-2",icon:"mdi-run",name:"应急演练"},{type:0,tag:"在线课室",vue:"vt_classRoom",color:"blue darken-2",icon:"mdi-google-classroom",name:"在线课室"},{type:0,tag:"培训记录",vue:"vt_teach",color:"blue darken-2",icon:"mdi-file-document-outline",name:"培训记录"},{type:7,tag:"工作备忘",vue:"vt_todo",color:"red",icon:"mdi-clock-check-outline",name:"工作备忘",p1:appSN,p2:0},];var TopMenu2=[{type:5,tag:"我的位置",vue:"",color:"blue",icon:"mdi-account-box",name:"我的位置",vuefile:"myGPS(1,0)"},{type:6,tag:"签到打卡",vue:"vt_sign",color:"blue darken-2",icon:"mdi-map-marker-path",name:"签到打卡",p1:appSN,p2:0,p3:1},{type:6,tag:"最新动态",vue:"vt_richText",color:"blue darken-2",icon:"mdi-speaker-wireless",name:"最新动态",p1:appSN,p2:0,p3:1},{type:6,tag:"知识库"  ,vue:"vt_richText",color:"green",   icon:"mdi-help-circle-outline", name:"知识库",p1:appSN,p2:0,p3:3},{type:5,tag:"博罗街景",vue:"",color:"green",icon:"mdi-palm-tree",name:"博罗街景",vuefile:"boluoStreet()"},];</script>var MyJsApi=['invoke','openLocation','getLocation','startAutoLBS','stopAutoLBS','onLocationChange','startLiving','replayLiving',	'scanQRCode','chooseImage','uploadImage','openEnterpriseChat','openUserProfile','startMeeting','selectEnterpriseContact','selectExternalContact','navigateToAddCustomer']; function SDK_start(){		wx_config();	window.wx.error((err)=>{wx_MainErr('wx.config错误:',JSON.stringify(err)); } )		}	function wx_config(){	g_log+='\n*申请Signature'; 	app.ShowBusy('微信Config配置中！');		axios.post('/login_qywx/signatureQY.asp?indexQS='+indexQS+'&appSN='+appSN).then((response)=>{	g_log+='\n*postSignReturn'; 		if(response.data.IsSuccess){	g_log+='\n*GetSignatureWX成功,准备Config:';		//window.wx.config----------------------------------------------------------------debug开关--			window.wx.config({beta:true,debug:0,appId:g_corpId,     				timestamp:response.data.timeStamp,	nonceStr:response.data.nonceStr,	signature:response.data.signature,	jsApiList: MyJsApi});    							window.wx.ready(()=>{g_log+='\n*进入wx.ready内'; 	wx_agentConfig()	})		    			g_log+='\n *config 函数后';			    		}else{wx_MainErr('signatureQY获取签名错误:',response.data.Message); }}).catch((err)=>{wx_MainErr('post-sign.asp错误:',JSON.stringify(err));});//axios.post.signature}function wx_agentConfig(){	g_log+='\n*申请Signature'; 	app.ShowBusy('微信agentConfig配置中！');		axios.post('/login_qywx/signatureWX.asp?indexQS='+indexQS+'&appSN='+appSN).then((response)=>{	g_log+='\n*postSignReturn'; 		if(response.data.IsSuccess){	g_log+='\n*GetSignatureWX成功,准备Config:'+response.data.signature;					//wx.agentConfig--------------------			window.wx.agentConfig({ corpid: g_corpId,  	agentid: '1000003',    			timestamp:response.data.timeStamp,	nonceStr:response.data.nonceStr,	signature:response.data.signature,	jsApiList: MyJsApi,    			success:(res)=>{	wx_getSession();  			},//读取seession参数 , ShowJson(res)    			fail:(err)=>{ g_log+='\n*agentConfig错误:'+JSON.stringify(err);     			wx_MainErr('agentConfig错误:',JSON.stringify(err));  }	});			    		g_log+='\n *agent-config 函数后';			    		}else{wx_MainErr('signaturewx获取签名错误:',response.data.Message); }}).catch((err)=>{ wx_MainErr('post-sign.asp错误:',JSON.stringify(err));});//axios.post.signature}    function wx_AuthCode(){} //钉钉才需要function wx_getSession(){g_log+='\n*准备PostGetSession'; 	app.ShowBusy('设置Session参数！');	axios.post('/login_qywx/getSession.asp?appSN='+appSN).then((response)=>{//alert(JSON.stringify(response.data.IsSuccess))	if(response.data.IsSuccess){		g_log+='\n*GetSession成功:' +response.data.username;		//alert(JSON.stringify(response.data));		app.ACC=response.data.ACC;  g_mem_ID=response.data.mem_ID;g_dw_name=response.data.dw_name;		g_truename=response.data.truename; app.truename=g_truename;		g_logo=response.data.d_pic; app.logo=g_logo; 		g_logintype=response.data.logintype;				g_ddConfigOK=true;		app.LoadVue('系统首页',homepage);		//wx_config(); //		updateGPS();//上传一次GPS		app.postLog('登录','企业微信登录');		app.ShowBusy('微信认证完成！'); app.HideBusy();  //setTimeout(()=>{ app.HideBusy()},1000);	}else{wx_MainErr('post-getSession错误:',response.data.Message); }		}).catch((err)=>{ wx_MainErr('post-getSession错误:',err); });//axios.post.then.catch		}//-----------ready  之后函数------------function isDDReady(){	if(navigator.userAgent.indexOf('DingTalk')<0&&navigator.userAgent.indexOf('wxwork')<0){app.ShowSnack('请在企业微信或钉钉中使用该功能！','warning');return false}	if(g_ddConfigOK){return true}else{wx_MainErr('微信授权未完成，建议重新进入！\n','');return false}}function wx_MainErr(tips,err){  g_log+=tips+'\n '+JSON.stringify(err); alert(g_log); location.replace('/wx_exit.asp?appSN='+appSN+'&msg='+g_log); }function SdkMeeting(Title,CalleeID,dtype,save){	if(!isDDReady()){return 0};		var StaffIds=[]	;	if(CalleeID==''){app.myAlert('呼叫对象微信ID为空！');return 0; 	//StaffIds=[];	}else if(CalleeID.indexOf('、')>0){StaffIds=CalleeID.split('、'); 	StaffIds.pop(); //去掉后面一个	}else{ StaffIds=[CalleeID];}	//数组只有一个数值		//alert(CalleeID+'/数组'+JSON.stringify(StaffIds)); 	var myTitle=Title?Title:g_truename+'的会议';	wx.invoke('startMeeting', {"attendees":StaffIds,	"meetingType":dtype,	"theme":myTitle,        }, (res)=>{if (res.err_msg == "startMeeting:ok") {	        	if(save==0){}	        	else{var editedData={ID:-1,d_cat:"1",d_title:obj.d_title ,d_names:g_truename,	vid:res.meetingId};					app.Json2DB('/common/data_s.asp?r_tab=cm_meeting&r_fd1=d_title$d_names$vid',editedData);				}		         }else{ShowJson(res);} }     );}function SdkMeetingObj(obj){if((!obj.d_uids)||(!obj.d_title)){app.myAlert('参会人员为空或会议标题为空！'); return 0} 	if(!isDDReady()){return 0};		var StaffIds=[]	; 	//alert(JSON.stringify(obj)); return 0;	if(obj.d_uids==''){app.myAlert('参会人员为空！');return 0; 	//StaffIds=[];	}else if(obj.d_uids.indexOf('、')>0){StaffIds=obj.d_uids.split('、'); 	StaffIds.pop(); //去掉后面一个	}else{ StaffIds=[obj.d_uids];}	//数组只有一个数值			//alert(obj.d_uids+'/数组'+JSON.stringify(StaffIds)); 		wx.invoke('startMeeting', {"attendees":StaffIds,	"meetingType":obj.d_cat,	"theme":obj.d_title,        }, (res)=>{if (res.err_msg == "startMeeting:ok") {	        	if(obj.save==0){}	        	else{obj.vid=res.meetingId;		        	app.Json2DB('/common/data_s.asp?r_tab=cm_meeting&r_fd1=d_title$d_names$vid$TopTab$d_cat&r_fd0=TopRow',obj);				}		         }else{ShowJson(res);} }     );}//obj={d_uids,d_names}function selectUser(obj){if(!isDDReady()){return 0};	var StaffIds=[]	; 	//alert(JSON.stringify(obj)); return 0;	if(typeof(obj.d_uids)=='undefined'||obj.d_uids==''){StaffIds=[];	}else if(obj.d_uids.indexOf('、')>0){StaffIds=obj.d_uids.split('、'); 	StaffIds.pop(); //去掉后面一个	}else{ StaffIds=[obj.d_uids];}	//数组只有一个数值		wx.invoke("selectEnterpriseContact", {"fromDepartmentId": 0,// 必填，打开的通讯录从指定的部门开始展示，-1所在部门开始, 0表示从最上层开始                "mode": "multi", "type": ["user"],// 必填，选择模式，single、multi  //必填，选择限制类型，["department", "user"]                "selectedUserIds": StaffIds,   //"selectedDepartmentIds": ["2","3"],        }, (res)=>{//app.myAlert(JSON.stringify(res.result));                if (res.err_msg == "selectEnterpriseContact:ok")                {   if(typeof res.result == 'string') {  res.result = JSON.parse(res.result)  }                    var selectedUser = res.result.userList; // 已选的成员列表                    obj.d_uids='';obj.d_names='';                    for (var i=0; i<selectedUser.length; i++){obj.d_uids+=selectedUser[i].id+'、';obj.d_names+=selectedUser[i].name+'、';}                   }        	}		); //invoke    } //预览图片    function openPic(url){ url=g_url+url;	wx.previewImage({current: url, 	urls: [url] });	}     //为字段上传照片,crud_method中photo4fd(fd)调用function photo4fd(obj,fd){if(!isDDReady()){return 0};		wx.chooseImage({	count:1,		sizeType:['original', 'compressed'],	sourceType:['album','camera'],		success: (res)=> {						var localId0 = res.localIds.pop();					wx.uploadImage({						localId: localId0,		isShowProgressTips: 1,						success: (res)=> {//alert(res.serverId);返回服务器端mid																axios.post("/common/GetFileFromQYWX.asp",qs.stringify({mid:res.serverId})).then(response=>{										 obj.editedItem[fd]=response.data.src;   //赋值给字段alert(response.data.src);										 obj.EditDialog=false;obj.EditDialog=true;//强制刷新														}).catch((err)=>{app.ShowAlert('warning','保存照片失败：',err); })							},//upload_success					}); //wx.uploadImage			}//chooseImage success	});} //从微信服务器保存到自己服务器传function SaveFromWX(localIds){  	var localId = localIds.pop();	wx.uploadImage({		localId: localId,		isShowProgressTips: 1,		success: (res)=> {			var serverId = res.serverId; // 返回图片的服务器端ID				//alert(serverId);			axios.post("/common/GetFileFromQYWX.asp",qs.stringify({mid:serverId})).then(response=>{					alert(response.data.src);											}).catch((err)=>{app.ShowAlert('warning','保存照片失败：',err); })									if(localIds.length > 0){SaveFromWX(localIds);}   //循环保存多个图片		},//success	}); //wx.uploadImage				}        //为字段选择用户function user4fd(obj,fd){if(!isDDReady()){return 0};	var StaffIds=[]	; 	//alert(JSON.stringify(obj)); return 0;	if(typeof(obj.d_uids)=='undefined'||obj.editedItem[fd]==''){StaffIds=[];	}else if(obj.editedItem[fd].indexOf('、')>0){StaffIds=obj.editedItem[fd].split('、'); 	StaffIds.pop(); //去掉后面一个	}else{ StaffIds=[obj.editedItem[fd]];}	//数组只有一个数值		wx.invoke("selectEnterpriseContact", {"fromDepartmentId": 0,// 必填，打开的通讯录从指定的部门开始展示，-1所在部门开始, 0表示从最上层开始                "mode": "multi", "type": ["user"],// 必填，选择模式，single、multi  //必填，选择限制类型，["department", "user"]                "selectedUserIds": StaffIds,   //"selectedDepartmentIds": ["2","3"],        }, (res)=>{//app.myAlert(JSON.stringify(res.result));                if (res.err_msg == "selectEnterpriseContact:ok")                {   if(typeof res.result == 'string') {  res.result = JSON.parse(res.result)  }                    var selectedUser = res.result.userList; // 已选的成员列表                    obj.editedItem[fd]='';obj.editedItem[fd+'_name']='';                    for (var i=0; i<selectedUser.length; i++){obj.editedItem[fd]+=selectedUser[i].id+'、';obj.editedItem[fd+'_name']+=selectedUser[i].name+'、';}                     obj.EditDialog=false;obj.EditDialog=true;//强制刷新                }        	}		); //invoke    }         function selectUserEx(obj){if(!isDDReady()){return 0};	wx.invoke('selectExternalContact', {"filterType": 0,         }, (res)=>{//app.myAlert(JSON.stringify(res));        if(res.err_msg == "selectExternalContact:ok"){//userIds  = res.userIds ; //返回此次选择的外部联系人userId列表，数组类型            obj.d_uids='';obj.d_names='';            for (var i=0; i<res.userIds.length; i++){obj.d_uids+=res.userIds[i]+'、';}        }else {     }    });}   //发送信息function MsgPost(obj){if((!obj.d_uids)||(!obj.d_title)){app.myAlert('收件人或信息为空！'); return 0} 	app.ShowBusy('正在发送信息！');		axios.post('/common/MsgPost.asp',qs.stringify(obj)).then(response=>{		if(response.data.errcode==0){app.myAlert('发送成功！'); app.HideBusy();//setTimeout(()=>{ app.HideBusy()},1000);　　　　	}else{app.myAlert('发送信息失败！'+response.data.errmsg)}	}).catch((err)=>{app.myAlert('MsgPost失败！'+err); })		}	//打开用户的Profile，以便发信息，视频连线等function openUserProfile(uid){ if(!isDDReady()){return 0;}   	wx.invoke('openUserProfile', {"type": 1, "userid":uid        }, (res)=>{ if(res.err_msg != "openUserProfile:ok"){ ShowJson(res)     } }); //invoke        }function sendMsg(uid){	if(!isDDReady()){return 0};						wx.invoke('openEnterpriseChat', { "groupName":"", "userIds":uid,					    		}, (res)=>{	 if (res.err_msg == "openEnterpriseChat:ok") {       					} else if (res.err_msg.indexOf('noper')>0) {app.myAlert('权限不足！');        					} else {app.myAlert(JSON.stringify(res))}    	}); //invoke}function selectExternalContact(){ if(!isDDReady()){return 0}  wx.invoke('selectExternalContact', { "filterType": 0, //0表示展示全部外部联系人列表，1表示仅展示未曾选择过的外部联系人。        }, function(res){ShowJson(res)        if(res.err_msg == "selectExternalContact:ok"){        }else {                    }    });} function navigateToAddCustomer(){ if(!isDDReady()){return 0;}   wx.invoke('navigateToAddCustomer',{},(res)=>{ });}     		function wx_alert(msg){ app.myAlert(msg)} //临时沿用 app.myAlertfunction myGPS(type,setValue){if(!isDDReady()){return 0}  //获取我的位置，setValue==0打开地图，其他 赋值给app.cur_obj.editedItem，	app.ShowBusy('获取定位中！');	window.wx.getLocation({type: 'gcj02',    success:(result)=>{ app.HideBusy();    //alert(result.longitude);    		if(result.longitude==0){wx_alert('无法获取定位信息，请确认您的手机已打开定位功能！'); return 0}	    	           	if(setValue==0){openMap('坐标:'+result.latitude+','+result.longitude,result.latitude,result.longitude); 	//setValue==0打开地图展示当前位置           					axios.post('/common/updateGps.asp?lng='+result.longitude+'&lat='+result.latitude)}                     	else if(typeof(app.cur_obj.editedItem)!="undefined"){app.cur_obj.editedItem.d_lat=''+result.latitude;     					app.cur_obj.editedItem.d_lng=''+result.longitude;	//app.cur_obj.editedItem.d_addr=result.address;  无该字段    					app.addr4fd(app.cur_obj,'d_addr',result.latitude+','+result.longitude);	//填写地址描述    					app.cur_obj.EditDialog=false;app.cur_obj.EditDialog=true;}},    fail:   (err)=>{ app.HideBusy();    wx_alert("定位失败:"+JSON.stringify(err)); }   } );}function getLoc(sc){app.OpenIfr('地图位置选取','/common/fd_Lat_Lng.asp')}function geoStart(){if(!isDDReady()){return 0} //上传与保存定位信息	updateGPS();//上传一次GPS	app.ShowBusy('获取定位中！');	window.wx.invoke('startAutoLBS',{   type: 'gcj02'  },       (res)=>{ app.HideBusy();        if(res.err_msg.indexOf('ok')>0){app.geostart=true; 			window.wx.onLocationChange( (result)=>{    				if(result.errMsg.indexOf('ok')>0){app.geostart=true;	app.geocount++;	//alert(app.geocount)   					if(app.geocount>10){ app.geocount=0;app.geoReport++;  app.ShowSnack('定位信息上报次数：'+app.geoReport);   						axios.post('/common/updateGps.asp?lng='+result.longitude+'&lat='+result.latitude)}}    			} // (result)=>	result.speed; // 速度，以米/每秒计			);//onLocationChange        }else{wx_alert("定位错误:"+JSON.stringify(err));       }//if        }); //invoke}function geoStop(){if(!isDDReady()){return 0}	window.wx.invoke('stopAutoLBS',{},     (res)=>{        if(res.err_msg.indexOf('ok')>0){app.geostart=false; app.ShowSnack('已取消定位信息上报！定位次数：'+app.geoReport);	          }else {  wx_alert("错误:"+JSON.stringify(err));             }     });}//打开地图function openMap(t,lat,lng){if(!isDDReady()){return 0;} 	wx.openLocation({latitude:lat,  longitude:lng,    name:t,   scale:16});}function uploadPic(num){	window.wx.biz.util.uploadImage({multiple:true, max:num,	onSuccess: (result)=>{alert(JSON.stringify(result))},	onFail:(err)=>{wx_alert("上传图片失败:"+JSON.stringify(err))}	}); }function uploadCam(num){	window.wx.biz.util.uploadImageFromCamera({compression:true,	onSuccess: (result)=>{alert(JSON.stringify(result))},	onFail:(err)=>{wx_alert("拍照上传失败:"+JSON.stringify(err))}	}); }function uploadFile(num){	window.wx.biz.util.uploadAttachment({	onSuccess: (result)=>{alert(JSON.stringify(result))},	onFail:(err)=>{wx_alert("文件上传失败:"+JSON.stringify(err))}	}); }function mapByArr(){	var myurl="http://hmxx.0752app.cn/common/lbs_mapByArr.asp";	if(g_ddConfigOK){window.wx.biz.util.openLink({url:myurl})}	else{app.OpenIfr('调度地图',myurl)}	}function updateGPS(){	//window.wx.checkJsApi({jsApiList:['startMeeting','getLocation','scanQRCode'],success:(res)=>{alert(JSON.stringify(res))}});window.wx.getLocation({type: 'gcj02',     success: result=>{var ls_url='/common/updateGps.asp?lng='+result.longitude+'&lat='+result.latitude; //alert(ls_url);    			axios.post(ls_url).then(response=>{}).catch((err)=>{	})}});} //updateGPS<style>
.v-sheet--offset { top: -24px; position: relative; }
.lstick{width: 2px; background: #398bf7; height: 30px; margin-left: -20px; margin-right: 18px; position: absolute;}
.line5H{width:100%;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:5;-webkit-box-orient:vertical;height:108px;}
.line5 {width:100%;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:5;-webkit-box-orient:vertical;}
.line2 {width:100%;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;;height:40px;}
</style>

<body>	
<div id="app"><v-app id="inspire">
<!-- 顶部工具栏v-app-bar+v-tabs  -->
<v-app-bar app  color="blue darken-4" dark dense clipped-left tile><v-icon @click.stop="drawer=!drawer">mdi-menu</v-icon>
    <span  v-if="tabcom.length<3||bigWidth"  style="width:7rem" @click.stop="drawer=!drawer">{{sysName}}</span>
	<v-tabs v-model="tab"><v-tabs-slider color="yellow"></v-tabs-slider><v-tab v-for="(item,index) in tabcom" :key="item">{{tabname[index]}}</v-tab></v-tabs>
	<v-icon @click="LoadVue('系统首页',homepage)">mdi-home</v-icon>
</v-app-bar>

<!-- 屏幕内容主体 v-main + v-tabs-items. main:class="pt-9 pb-0 ma-0"  -->
<v-main class="py-0" style="background:#F1FAFA"><v-container fluid fill-height0 class="px-0 mx-0">
	<v-tabs-items v-model="tab" touchless  style="background:transparent"><v-tab-item v-for="(item,index) in tabcom" :key="item"  class="px-3 pt-12 ma-0" >
		<component :ID="item" :is="item" fluid></component></v-tab-item></v-tabs-items>
</v-container></v-main>

<!-- 系统窗口，当作子window使用 ，动态加载vue控件-->
<v-dialog v-model="sysWin"  fullscreen  transition=false scrollable><v-card><v-card-actions class="subtitle-1 grey lighten-2">{{sysWintitle}}
	<v-spacer></v-spacer><v-btn small onclick="app.ClosePage()" ><v-icon>mdi-keyboard-return</v-icon>返回</v-btn></v-card-actions>
	<v-card-text><component ID="sysWinCom" :is="sysWinCom" fluid></component></v-card-text></v-card>
</v-dialog>

<v-dialog ref="dateSelect"  v-model="dateDialog" :return-value.sync="dateStr"  persistent  width="290px">
    <v-date-picker  v-model="dateStr" scrollable locale="zh-cn"><v-spacer></v-spacer>
        <v-btn text color="primary"  @click="dateDialog=false">取消</v-btn>
        <v-btn text color="primary"  @click="fd_date_save(dateStr)">确定</v-btn></v-date-picker>
</v-dialog>
	
<!-- ifr窗口dialog，动态加载iframe   -->
<v-dialog v-model="ifrDialog" fullscreen  transition=false scrollable><v-card><v-card-actions class="subtitle-1 grey lighten-2">{{ifrTitle}}:
	<v-spacer></v-spacer><v-btn small onclick="app.ifrDialog=false;app.ifrUrl=''"><v-icon>mdi-keyboard-return</v-icon>返回</v-btn></v-card-actions>
<iframe :src="ifrUrl" style="width:100%;height:98%;"  frameborder="no"  scrolling="yes" ></iframe></v-card >
</v-dialog>

<!-- 系统alert 信息框-->
<v-dialog v-model="alert" max-width="400"><v-card><v-card-actions  class="title grey lighten-2" primary-title>{{alertTitle}}</v-card-actions>
<v-card-text><br>{{alertMsg}}<br>&nbsp;<v-divider></v-divider><br>
	<div class="text-center"><v-btn small color="primary" dark @click="alert=false">关闭窗口</v-btn></div></v-card-text></v-card>
</v-dialog>

<!-- 呼叫界面-->
<v-dialog v-model="myCall" max-width="300" persistent><v-card><v-card-actions  class="title grey lighten-2" primary-title>{{myCallTitle}}</v-card-actions>
<v-card-text align="center"><br><v-icon color="blue darken-2">mdi-alert-circle</v-icon>{{myCallMsg}}
	<v-divider></v-divider>	
	<v-chip class="ma-2" color="success" label @click="sendMsg(calleeID)"><v-icon>mdi-chat-processing</v-icon>&nbsp;发送信息（微信信息）</v-chip>
	<v-chip class="ma-2" color="primary" label @click="SdkMeeting(myCallTitle,calleeID,0,0)"><v-icon>mdi-voice</v-icon>&nbsp;语音呼叫（微信语音）</v-chip>
	<v-chip class="ma-2" color="warning" label @click="SdkMeeting(myCallTitle,calleeID,1,0)"><v-icon>mdi-camcorder</v-icon>&nbsp;视频呼叫（微信视频）</v-chip>
	<v-chip class="ma-2" color="success" label outlined @click="openUserProfile(calleeID)"><v-icon>mdi-account</v-icon>&nbsp;微信资料（个人信息）</v-chip>
	<br>【{{calleeID}}】
	<v-divider></v-divider><br>
	<div class="text-center"><v-btn small color="primary" dark @click="myCall=false">关闭窗口</v-btn></div></v-card-text></v-card>
</v-dialog>

<!-- 忙process -->
<v-dialog v-model="isBusy" width="500px" max-width="80%" persistent><v-progress-linear height="25" background-color="white" color="light-blue" striped indeterminate ><strong>{{isBusyMsg}}</strong></v-progress-linear></v-dialog>

<!-- snackbar信息  ， 居中加：centered  elevation="24" -->
<v-snackbar v-model="snackbar"  multi-line :color="snackcolor" :timeout="timeout"  min-height="130px" shaped>
	<p class="title">{{snackMsg}}</p><template v-slot:action="{attrs}"><v-chip v-bind="attrs" color="white" outlined  @click="snackbar=false" >OK</v-chip></template>	
</v-snackbar>

<!-- 左侧下拉式导航  -->
<v-navigation-drawer v-model="drawer" app clipped width="190"><v-list dense >
<v-list-item @click="LoadVue('我的名片','vt_txlme','vt_txl.shtm?d_type=1')">
    <v-list-item-avatar  size="80" class="mx-auto"><v-img :src="logo==''? '/images/man.jpg' :logo" ></v-img></v-list-item-avatar>
</v-list-item>
<v-list-item   @click="LoadVue('我的名片','vt_txlme','vt_txl.shtm?d_type=1')"><v-sheet class="mx-auto">{{truename}}</v-sheet></v-list-item-title></v-list-item>
<v-divider></v-divider> 
<v-list-item @click.stop="drawer=false"><v-sheet class="mx-auto">隐藏菜单</v-sheet><v-icon>mdi-chevron-left</v-icon></v-list-item>

<v-divider></v-divider>   
	<v-list-item  @click="LoadVue('系统首页',homepage)"><v-icon color="green">mdi-home</v-icon><v-list-item-content><v-list-item-title>&emsp;系统首页</v-list-item-title></v-list-item-content></v-list-item>

<!-- 根据数组menus1生成菜单列表  -->
<template v-for="(item,index) in menus1"><v-divider></v-divider>
	<v-list-item v-if="item.type==2" dense></v-list-item>
 	<v-list-item  v-else-if="item.type==0" @click="LoadVue(item.tag,item.vue)"><v-icon :color="item.color">{{item.icon}}</v-icon><v-list-item-content><v-list-item-title>&emsp;{{item.name}}</v-list-item-title></v-list-item-content></v-list-item>
 	<v-list-item  v-else-if="item.type==3"><v-icon :color="item.color">{{item.icon}}</v-icon><v-list-item-content><v-list-item-title><a :href="item.vuefile"  style="text-decoration:none;">&emsp;{{item.name}}</a></v-list-item-title></v-list-item-content></v-list-item>
 	<v-list-item  v-else-if="item.type==4" @click="LoadVue(item.tag,item.vue,item.vuefile)"><v-icon :color="item.color">{{item.icon}}</v-icon><v-list-item-content><v-list-item-title>&emsp;{{item.name}}</v-list-item-title></v-list-item-content></v-list-item>
 	<v-list-item  v-else-if="item.type==5"  :onclick="item.vuefile"><v-icon :color="item.color">{{item.icon}}</v-icon><v-list-item-content><v-list-item-title>&emsp;{{item.name}}</v-list-item-title></v-list-item-content></v-list-item>
 	<v-list-item  v-else-if="item.type==6" @click="LoadVueParm(item.p1,item.p2,item.p3,item.tag,item.vue)"><v-icon :color="item.color">{{item.icon}}</v-icon><v-list-item-content><v-list-item-title>&emsp;{{item.name}}</v-list-item-title></v-list-item-content></v-list-item>
</template>

</v-list>

<v-expansion-panels v-model="panel1" multiple class="my-0 py-0">
<v-expansion-panel><v-expansion-panel-header  class="my-0 py-0" color="#F0DAD2" >其它菜单项</v-expansion-panel-header>
<v-expansion-panel-content class="ma-0 pa-0">
<v-list dense>	
<!-- 根据数组menus2生成菜单列表  -->
<template v-for="(item,index) in menus2">
	<v-list-item v-if="item.type==2" dense></v-list-item>
 	<v-list-item  v-else-if="item.type==0" @click="LoadVue(item.tag,item.vue)"><v-icon :color="item.color">{{item.icon}}</v-icon><v-list-item-content><v-list-item-title>&emsp;{{item.name}}</v-list-item-title></v-list-item-content></v-list-item>
 	<v-list-item  v-else-if="item.type==3"><v-icon :color="item.color">{{item.icon}}</v-icon><v-list-item-content><v-list-item-title><a :href="item.vuefile"  style="text-decoration:none;">&emsp;{{item.name}}</a></v-list-item-title></v-list-item-content></v-list-item>
 	<v-list-item  v-else-if="item.type==4" @click="LoadVue(item.tag,item.vue,item.vuefile)"><v-icon :color="item.color">{{item.icon}}</v-icon><v-list-item-content><v-list-item-title>&emsp;{{item.name}}</v-list-item-title></v-list-item-content></v-list-item>
 	<v-list-item  v-else-if="item.type==5"  :onclick="item.vuefile"><v-icon :color="item.color">{{item.icon}}</v-icon><v-list-item-content><v-list-item-title>&emsp;{{item.name}}</v-list-item-title></v-list-item-content></v-list-item>
 	<v-list-item  v-else-if="item.type==6" @click="LoadVueParm(item.p1,item.p2,item.p3,item.tag,item.vue)"><v-icon :color="item.color">{{item.icon}}</v-icon><v-list-item-content><v-list-item-title>&emsp;{{item.name}}</v-list-item-title></v-list-item-content></v-list-item>
</template>

	<v-list-item  @click="LoadVueACC('系统设置','vt_settings','S')"><v-icon color="red">mdi-shape</v-icon><v-list-item-content><v-list-item-title>&emsp;系统设置</v-list-item-title></v-list-item-content></v-list-item>	
	<v-list-item @click="DelTab()"><v-icon color="orange">mdi-delete</v-icon><v-list-item-content><v-list-item-title>关闭当前页</v-list-item-title></v-list-item-content></v-list-item>
	<v-list-item @click="DelAllTab()"><v-icon color="red">mdi-delete</v-icon><v-list-item-content><v-list-item-title>关闭所有页</v-list-item-title></v-list-item-content></v-list-item>		

</v-list>
	</v-expansion-panel-content>
</v-expansion-panel>
</v-expansion-panels> 

</v-navigation-drawer>

</v-app></div>

</body>	<!--  index_view是<body>里面的Vue+view --></html><script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js">       </script><script src="https://cdn.jsdelivr.net/npm/vuetify@2.6.1/dist/vuetify.min.js"></script><script src="https://cdn.jsdelivr.net/npm/axios@0.24.0/dist/axios.min.js"></script><script src="https://cdn.jsdelivr.net/npm/qs@6.10.2/dist/qs.js"></script><script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script><script src="VueLoader.js"></script><script src="sdk_vue.js"></script><script type="text/javascript">	var	qs = Qs;	axios.defaults.headers.post['Content-Type']	= 'application/x-www-form-urlencoded';	//document.title = g_sysName+'平台'; //bug：后退会退到之前的title		vueInit();		//系统界面入口-----	</script>  <!--  公共的包含文件 -->