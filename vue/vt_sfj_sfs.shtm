<template><div>	<!--é¡¶éƒ¨æ“ä½œæ panel sheet -->	<v-toolbar class="mx-auto mb-3" color="transparent" dense elevation="0"  v-if="crudToolbar">	 <v-spacer></v-spacer>	<v-btn-toggle dense shaped>	<v-btn v-if="cardmode" @click="cardmode=false">åˆ—è¡¨é£æ ¼</v-btn>	<v-btn v-else          @click="cardmode=true" >å¡ç‰‡é£æ ¼</v-btn>		<v-btn @click="init()"       >åˆ·æ–°</v-btn>	<v-btn @click="newItem()"    >æ–°å¢</v-btn>	<v-btn onclick="app.ClosePage()">å…³é—­</v-btn></v-btn-toggle><v-spacer></v-spacer>		<v-icon color="primary" @click="crudPanel=!crudPanel" color="primary">mdi-menu</v-icon></v-toolbar><v-alert v-model="crudPanel" border="top"  colored-border color="warning" elevation="2" align="start"><v-row dense><v-col cols="12" sm="12" md="12" lg="6"><v-text-field v-model="search" clearable hide-details outlined dense label="æ•°æ®è¿‡æ»¤ï¼ˆæŸ¥æ‰¾ï¼‰ï¼Œè¯·è¾“å…¥å…³é”®å­—ï¼š" ></v-col><!-- æ¨¡ç³Šæœç´¢ä¸´æ—¶å–æ¶ˆ<v-col cols="12" sm="6" md="4" lg="3"><v-text-field v-model="searchdb" clearable hide-details outlined dense label="æ¨¡ç³Šæœç´¢" append-icon="mdi-transfer-down" @click:append="alert('s')"></v-col>--></v-row></v-alert>	<!--  v-data-iterator ä¸ªæ€§åŒ–Cardé£æ ¼å±•ç¤ºæ•°æ®--------- --><v-data-iterator v-if="cardmode" :items="d_items" :items-per-page.sync="itemsPerPage" :page="page" :search="search" hide-default-footer><template v-slot:default="props"><v-row><v-col v-for="item in props.items" :key="item.ID" cols="12" sm="6" md="4" lg="3"><v-card elevation="12">	<v-img v-if="item.d_pic!=''" class="white--text align-end" height="150px" :src="item.d_pic"></v-img>	<v-img v-else class="white--text align-end" height="150px" src="/images/syslogo.jpg"></v-img>		<v-card-text class="blue darken-2" @click="editItem(item)"><div class="body-1 white--text text-truncate">{{item.d_name}}</div></v-card-text><v-simple-table><template v-slot:default><tbody>	<tr><td colspan=2>æœºæ„åç§°ï¼š{{item["d_name"] }}</td></tr> 		<tr><td colspan=2>è´Ÿè´£äººï¼š{{item["d_fzr"] }}</td></tr> 	<tr><td colspan=2>è”ç³»äººï¼š{{item["d_lxr"] }}	<v-chip  v-if="item.d_lxr_tel!=''" class="ma-2" color="success"  small outlined :onclick="'quickCall(&quot;'+item.d_lxr_tel+'&quot;,&quot;å‘¼å«'+item.d_lxr+'&quot;,&quot;è¯·é€‰æ‹©ä¸‹é¢çš„å‘¼å«æ–¹å¼ï¼š&quot;)'" >{{item.d_lxr_tel}}</v-chip></td></tr>		<tr><td colspan=2>ç»„ç»‡æ¶æ„ï¼š{{item["d_org"] }}</td></tr>	<tr><td colspan=2>åŠå…¬åœ°ç‚¹ï¼š{{item["d_addr"] }}</td></tr>	<tr><td colspan=2>ç»&nbsp;çº¬&nbsp;åº¦ï¼š{{item["d_lat"]}},{{item["d_lng"]}}</td></tr>	<tr><td colspan=2>æ¦‚å†µï¼š{{item["d_script"] }}</td></tr></tbody></template></v-simple-table><v-divider></v-divider>	<!-- cardActionçš„ä¸‰ä¸ªæ“ä½œchip---------- -->	<v-card-actions class="py-3">	<v-chip color="primary"  small outlined label @click="SdkMsg(item)">ä¿¡æ¯æ¨é€</v-chip>				<v-spacer></v-spacer>		<v-chip color="success"  small outlined label @click="MapByLatLng(item.d_title?item.d_title:'æ‰€åœ¨ä½ç½®',item.d_lat,item.d_lng)">æ‰“å¼€åœ°å›¾</v-chip>  		<v-spacer></v-spacer>  	<v-chip color="success"  small outlined label @click="LoadVueParm(parm_r.r_tab,item.ID,0,'é™„ä»¶ç®¡ç†','vt_files')" >é™„ä»¶ï¼š{{item.attachNum}}</v-chip></v-card-actions></v-card><br></v-col></v-row></template>	<!-- data-iteratoré¡µè„šæ’ä»¶---------- -->	<template v-slot:footer><v-row v-if="crudPager" class="mx-1 mt-3" align="center" justify="center">	<v-btn-toggle  dense shaped>	<v-btn small @click="formerPage">ä¸Šé¡µ</v-btn>	<v-btn small>P{{page}}/å…±{{numberOfPages}}</v-btn>	<v-menu offset-y  class="mx-0">		<template v-slot:activator="{on}"><v-btn small dark text color="primary" v-on="on">æ¯é¡µ{{itemsPerPage}}</v-btn></template>		<v-list><v-list-item v-for="(number,index) in itemsPerPageArray" :key="index" @click="updateItemsPerPage(number)">		<v-list-item-title class="ma-0 pa-0">{{number}}</v-list-item-title></v-list-item></v-list>	</v-menu>			<v-btn small  @click="moreItem()" >æ›´å¤š</v-btn>	<v-btn small  @click="nextPage">ä¸‹é¡µ</v-btn></v-btn-toggle> 	<v-btn small v-if="crudToolbar" block depressed class="my-6 body-1 grey lighten-1 white--text"  onclick="app.ClosePage()" >	<v-icon>mdi-keyboard-return</v-icon><v-spacer></v-spacer>å…³é—­æœ¬é¡µ<v-spacer></v-spacer><v-icon>mdi-keyboard-return</v-icon></v-btn>	</v-row></template></v-data-iterator><br>	<!--  v-data-table æ¨ªå‘åˆ—è¡¨é£æ ¼ --> 	<v-data-table v-if="cardmode==false" :headers="headers" :items="d_items" :items-per-page.sync="itemsPerPage" :page="page" :search="search" class="elevation-5 text-truncate" mobile-breakpoint="100" >	<template v-slot:item.action="{item }"><v-icon  @click="editItem(item)" color="primary">mdi-lead-pencil</v-icon></template>	<template v-slot:no-data><v-btn color="primary" @click="newItem('')" small>æ— æ•°æ®ã€‚ç‚¹å‡»æ–°å¢è®°å½•</v-btn></template></v-data-table><br>	<!-- ä¸ªæ€§åŒ–ç¼–è¾‘çš„å¯¹è¯æ¡†----------dialog --><v-dialog v-model="EditDialog" fullscreen scrollable><v-card ><v-card-title class="headline" style="background:#F1FAFA">	<v-btn rounded color="primary" dark @click="close()" small><v-icon>mdi-keyboard-return</v-icon>è¿”å›</v-btn><v-spacer></v-spacer>	<v-btn v-if="(editedIndex>-1)&&editable" rounded small color="primary" dark @click="deleteItem(d_items[editedIndex]);"><v-icon>mdi-delete</v-icon>åˆ é™¤</v-btn><v-spacer></v-spacer>	 	<v-btn v-if="crudToolbar==false"  rounded color="primary" dark @click="close()" small><v-icon>mdi-keyboard-return</v-icon>è¿”å›</v-btn>	<v-btn v-else-if="editable" rounded color="primary" dark @click="saveData()" small><v-icon>mdi-alert-circle</v-icon>ä¿å­˜[{{editedItem.ID}}]</v-btn>	<v-btn v-else               rounded color="primary" dark @click="editable=true" small><v-icon>mdi-alert-circle</v-icon>å¼€å§‹ç¼–è¾‘</v-btn></v-card-title><v-card-text><br><v-row  dense><v-col cols="12" md="6" lg="4"><v-col cols="12" md="6" lg="4"><v-text-field v-model="editedItem.d_name" label="å¸æ³•æ‰€åç§°" type="text"  :readonly="!editable" dense></v-text-field></v-col>	<v-col cols="12" md="6" lg="4"><v-text-field v-model="editedItem.d_fzr" label="è´Ÿè´£äºº" type="text"  :readonly="!editable" dense></v-text-field></v-col><v-col cols="12" md="6" lg="4"><v-text-field v-model="editedItem.d_lxr" label="è”ç³»äºº" type="text"  :readonly="!editable" dense></v-text-field></v-col><v-col cols="12" md="6" lg="4"><v-text-field v-model="editedItem.d_lxr_tel" label="è”ç³»æ–¹å¼" type="text"  :readonly="!editable" dense></v-text-field></v-col><v-col cols="12" md="6" lg="4"><v-text-field v-model="editedItem.d_org" label="ç»„ç»‡æ¶æ„" type="text"  :readonly="!editable" dense></v-text-field></v-col><v-col cols="12"><v-textarea  rows=2 v-model="editedItem.d_script" label="æ¦‚å†µï¼š" outlined auto-grow :readonly="!editable" dense></v-textarea></v-col><v-col cols="12"><v-textarea  rows=2 v-model="editedItem.d_memo" label="å¤‡æ³¨ä¿¡æ¯ï¼š" outlined auto-grow :readonly="!editable" dense></v-textarea></v-col>	<!-- ç»çº¬åº¦ --><v-col cols="12" md="6"><v-text-field v-model="editedItem.d_lat" label="å®šä½åæ ‡ç»åº¦ï¼š" type="text"  readonly dense>	<template v-slot:append> <v-btn v-if="editable==true" color="primary" dark onclick="getLoc(200000)" small>åœ°å›¾å®šä½</v-btn>	&nbsp;<v-btn color="primary" dark @click="MapByLatLng('',editedItem.d_lat,editedItem.d_lng)" small>æ‰“å¼€åœ°å›¾</v-btn></template>	</v-text-field></v-col><v-col cols="12" md="6"><v-text-field v-model="editedItem.d_lng" label="å®šä½åæ ‡çº¬åº¦ï¼š" type="text"  readonly dense></v-text-field></v-col><v-col cols="12"><v-textarea rows=2 v-model="editedItem.d_addr" label="åœ°å€æè¿°ï¼š" outlined auto-grow :readonly="!editable" dense></v-textarea></v-col> 	<!-- ç…§ç‰‡   --><B>´¦Àí SSI ÎÄ¼şÊ±³ö´í</B><BR>
</v-row>	
<v-btn  small block depressed class="body-1 light-green lighten-2 white--text my-4"  @click="close()"><v-icon>mdi-keyboard-return</v-icon><v-spacer></v-spacer>è¿”å›<v-spacer></v-spacer><v-icon>mdi-keyboard-return</v-icon></v-btn>

</v-card-text></v-card></v-dialog><!-- ç¼–è¾‘çš„å¯¹è¯æ¡† --></div></template><script>module.exports={data(){return {		varWin:{}, //H5çš„windowå…¨å±€å˜é‡ 	itemsPerPageArray: [5, 10, 15],	search:'',searchdb:'',	filter: {},	sortDesc: false,	page: 1,	itemsPerPage: 5,	sortBy:'ID',		EditDialog: false,	FlowDialog: false,	editable:false,	cardmode:true,	addcount:0, //æ–°è®°å½•ï¼ŒIDé»˜è®¤å€¼	editedIndex: -1,	editedItem: {},	d_items:[],		ID0:0,ID1:0, //æœ€å°ID	crudPager:true,  //é¡µç   	crudToolbar:true, //å·¥å…·æ   	crudPanel:false,  //å·¥å…·æ ä¸‹é¢çš„panel	queryObj:{},      //urlå‚æ•°	d_type:'',			b_folder:false,//ç›®å½•ï¼ˆæ–‡ä»¶å¤¹ï¼‰				url_r:'/common/data_r.asp',	url_s:'/common/data_s.asp',	url_d:'/common/data_d.asp',	test_data:'vt_sfj_sfs_data.html',	parm_r:{r_page:1,r_rows:20,r_order:'ID$desc',r_searchdb:'',r_where:'',r_MaxID:0,r_MinID:0,				r_tab:'sfj_sfs',r_fd:'ID$d_name$d_fzr$d_lxr$d_lxr_tel$d_org$d_lat$d_lng$d_addr$d_script$d_pic$d_memo',			r_fd0:'',r_fd1:'d_name$d_fzr$d_lxr$d_lxr_tel$d_org$d_lat$d_lng$d_addr$d_script$d_pic$d_memo',},	//ä¸ªæ€§åŒ–å­—æ®µå®šä¹‰ï¼Œä»¥åŠå­—æ®µåˆå§‹åŒ–æ•°å€¼			defaultItem:{ID:-1,d_name:'',d_fzr:'',d_lxr:'',d_fzr_tel:'',d_org:'',d_lat:'',d_lng:'',d_addr:'',d_script:'',d_pic:'/images/syslogo.jpg',d_memo:''},	//æ¨ªå‘åˆ—è¡¨ï¼Œåˆ—å±æ€§å®šä¹‰	headers: [		{text: 'æ“ä½œ',value: 'action',sortable: false,align:'center',divider:true,width:'50px' },		{text: 'ID', value: 'ID', align:'center', sortable: false,divider:true,width:'50px'},		{text: 'åç§°',value: 'd_name',divider:true,align:'center'},				{text: 'è´Ÿè´£äºº',value: 'd_fzr',divider:true,align:'center'},		{text: 'è”ç³»äºº',value: 'd_lxr' ,divider:true,align:'center'},		{text: 'è”ç³»æ–¹å¼',value: 'd_lxr_tel',divider:true,align:'center'},				{text: 'ç»„ç»‡æ¶æ„',value: 'd_org' ,divider:true,align:'start'},		{text: 'ç»åº¦',value: 'd_lat',divider:true,align:'start' },		{text: 'çº¬åº¦',value: 'd_lng',divider:true,align:'start' },		{text: 'åœ°å€',value: 'd_addr',divider:true,align:'start' },		{text: 'æ¦‚å†µ',value: 'd_script',divider:true,align:'start' },		{text: 'ç…§ç‰‡',value: 'd_pic',divider:true,align:'start' },		{text: 'å¤‡æ³¨ä¿¡æ¯',value: 'd_memo',divider:true,align:'start' }, 		], 	 } //data },computed:{numberOfPages(){return Math.ceil(this.d_items.length/this.itemsPerPage)},},created(){app.tabobj[app.tabobj.length -1]=this; this.queryObj=qs.parse(''); this.init(); },methods: {	afterData(){app.ShowSnack('æ•°æ®åŠ è½½å®Œæˆï¼')},		//è§„åˆ™ï¼šfun2,è¦†ç›–funï¼Œfun0æ’å…¥funä»£ç å‰	editItem(item){if(this.EditDialog){return 0 } 		if(typeof(eval(this.editItem2))=='function'){ this.editItem2(item) ; return 0 }				app.editItem(this,item);	this.EditDialog=true; 	}, //ç¼–è¾‘				newItem(){ if(typeof(eval(this.newItem2))=='function'){this.newItem2(); return 0}	 			app.newItem(this); this.EditDialog=true;	this.editable=true;       		   if(typeof(eval(this.newInit))=='function'){this.newInit();}	 //æ‰§è¡Œåˆå§‹åŒ–å›è°ƒ	},	moreItem(){ if(typeof(eval(this.moreItem2))=='function'){this.moreItem2(); return 0}	 			app.moreItem(this);       		  	},		deleteItem(item){ if(typeof(eval(this.deleteItem2))=='function'){this.deleteItem2(item); return 0}	 			app.deleteItem(this,item);this.EditDialog=false;},				saveData(){ if(typeof(eval(this.checkData))=='function'){if(this.checkData()!=1){return 0}}	 			if(typeof(eval(this.saveData2))=='function'){this.saveData2(); return 0}	 			app.saveData(this);}, //ä¿å­˜		close(){if(typeof(eval(this.close2))=='function'){this.close2(); return 0}	 			if(app.sysWin){app.sysWin=false;app.sysWinCom=''; return 0}			if(this.EditDialog){this.EditDialog = false; return 0}			app.DelTab()	},		//init2()>init0()+init() 	init(){ if(typeof(eval(this.init2))=='function'){this.init2(); return 0}			if(typeof(eval(this.init0))=='function'){this.init0();} 	//æ’å…¥init0()			if(gv_db!=''){app.getData(this);}else{app.getTestData(this);}},//init				openTab(){if(this.parm_r.r_tab=='cm_richtext'){this.LoadVueParm(this.defaultItem.TopTab,this.defaultItem.TopRow,this.defaultItem.d_type,this.d_attr.title,'vt_richText_card') 		}else if(this.parm_r.r_tab=='cm_team'){    this.LoadVueParm(appSN,'0','1','è™šæ‹Ÿå›¢é˜Ÿ','vt_team') }	 	    		}, //æ‰“å¼€æœ¬æ ç›®					LoadFolder(CurNode){//åŠ è½½ç›®å½•ï¼ˆæ–‡ä»¶å¤¹ï¼‰		this.clickedNode=CurNode;		this.defaultItem.topID=CurNode.id;		if(CurNode.id!=0){this.url_r='/common/data_r.asp?r_TopID='+CurNode.id; }//TopIDä¸‹å±æ£€ç´¢ //ä¿®æ”¹app.ShowSnack('è¿™æ˜¯ï¼š'+ID);			else{this.url_r='/common/data_r.asp'; }		this.init();			if(CurNode.children.length){return 0} 	//å·²åˆ·æ–°				flowParm={page:1,rows:100, d_type:this.defaultItem.d_type,topID:CurNode.id};		axios.post('/common/data_folder.asp',qs.stringify(flowParm) ).then(response=>{			CurNode.childNum=response.data.rows.length;			for (var i=0; i < response.data.rows.length; i++)				{CurNode.children.push({id:response.data.rows[i].ID,name:response.data.rows[i].d_title,childNum:-1,children:[]});}						}).catch((err)=>{app.ShowAlert('warning','è¯»å–ç›®å½•ä¿¡æ¯å‡ºé”™:',err); })	},			 	nextPage(){  if(this.page + 1 <= this.numberOfPages) this.page += 1},	formerPage(){if(this.page - 1 >= 1) this.page -= 1},	updateItemsPerPage(number) {		this.itemsPerPage = number },	haveAcc(myacc){return app.ACC.indexOf(myacc)>-1}, //æ˜¯å¦å…·å¤‡æŸæƒé™	LoadVue(s1,s2,s3,s4){app.LoadVue(s1,s2,s3,s4);},  //ä¸Šçº§APPçš„å‡½æ•°é‡æ–°å°è£…	LoadVueACC(s1,s2,s3,s4,s5){app.LoadVueACC(s1,s2,s3,s4,s5);}, 		LoadVueParm(TopTab,TopRow,d_type,tabtitle,vueName,filename,parm){app.LoadVueParm(TopTab,TopRow,d_type,tabtitle,vueName,filename,parm)},	LoadVueMemID(TopTab,TopRow,tabtitle,vueName,filename,parm){app.LoadVueMemID(TopTab,TopRow,tabtitle,vueName,filename,parm)},	LoadVue2Win(t,vueName,filename,parm){app.LoadVue2Win(t,vueName,filename,parm)},		LoadVue2WinParm(TopTab,TopRow,d_type,t,vueName,filename,parm){app.LoadVue2WinParm(TopTab,TopRow,d_type,	t,vueName,filename,parm)},	OpenIfr(title,url){app.OpenIfr(title,url)},	MapByLatLng(title,lat,lng ){app.MapByLatLng(title,lat,lng )},		ShowJson(d){ShowJson(d)},		ShowAlert(Title,Msg,Type){if(Type){app.ShowAlert(Type,Title,Msg)}else{app.ShowAlert('warning',Title,Msg)}},	ShowSnack(Msg,color){app.ShowSnack(Msg,color)},	ObjClass(obj){alert(obj.constructor.name+'ï¼š'+obj.constructor)},	Asp2Arr(url,obj,fd){app.Asp2Arr(url,obj,fd)},		ExecFun(fun,p1,p2,p3){window[fun](p1,p2,p3);},//vueä¸­æ‰§è¡Œwindowçš„å‡½æ•°			MyCall(telno,Title,Msg,calleeID){app.MyCall(telno,Title,Msg,calleeID)},//vue å°è£…	MyCallMulti(CalleeIDwx,CalleeIDdd,Title,Msg){app.MyCallMulti(CalleeIDwx,CalleeIDdd,Title,Msg)},	setTmpStr(item){app.tmpStr2=item.d_mem_name;	app.tmpStr3=item.d_title;	app.tmpStr1=item.d_mem;}, 	TmpStr(s1,s2,s3){app.tmpStr1=s1;	app.tmpStr2=s2;		app.tmpStr3=s3;}, 	SdkMeeting(Title,CalleeID,dtype,save){SdkMeeting(Title,CalleeID,dtype,save)},	SdkMeetingObj(obj){SdkMeetingObj(obj)},	SdkMsg(item){app.SdkMsg(item)},	SdkMsg2Uid(uid,uname,msg){app.SdkMsg2Uid(uid,uname,msg)},	MsgPost(obj){MsgPost(obj)},//å‘msgï¼Œåœ¨sdk-wx		sendDing(uids,title){sendDing(uids,title)},//å‘é’‰ï¼Œåœ¨sdk-dd				ShowUserPos(id){ShowUserPos(id)},		selectUser(){selectUser(this.d_users)},// åˆ†åˆ«åœ¨å¾®ä¿¡ä¸é’‰é’‰sdkä¸­	selectUserEx(){selectUserEx(this.d_usersEx)},//å¤–éƒ¨è”ç³»äºº			openUserProfile(uid){openUserProfile(uid)},	//å¾®ä¿¡æ‰“å¼€profile	user4fd(fd){user4fd(this,fd)},	addr4fd(fd,latlng){app.addr4fd(this,fd,latlng)},		photo4fd(fd){photo4fd(this,fd)},	openPic(url){openPic(url)},	CallObj4Users(){app.tmpObj=this;	app.LoadVue2Win('é€‰æ‹©ç”¨æˆ·','vt_CallObj')},// åˆ†åˆ«åœ¨å¾®ä¿¡ä¸é’‰é’‰sdkä¸­,ä»ç¾¤ç»„ä¸­é€‰æ‹©ç”¨æˆ·æ¸…å•	postReadeded(tab,row,msg){app.postReadeded(tab,row,msg)},	postLog(msg1,msg2){app.postLog(msg1,msg2)},	VarRet(fd){return app[fd]},		 //initParmå‚æ•°ä¼ ç»™appä¸´æ—¶å˜é‡,setParmä¸´æ—¶å˜é‡ä¼ åˆ°Vueå®ä¾‹ã€‚	initParm(d_type){app.TopTab=this.parm_r.r_tab;	app.TopRow=this.editedItem.ID;		app.d_type=d_type;},	setParm(){this.defaultItem.TopTab=app.TopTab;	this.defaultItem.TopRow=app.TopRow;		this.defaultItem.d_type=app.d_type;		this.url_r ='/common/data_r.asp?TopTab='+app.TopTab+'&TopRow='+app.TopRow +'&d_type='+app.d_type;	//alert(this.url_r)		},	showColor(t){switch(t){ case 'â… çº§':case 'çº¢è‰²':return 'error';				case 'â…¡çº§':case 'æ©™è‰²':return 'warning';							case 'â…¢çº§':case 'é»„è‰²':return 'yellow darken-1'; 	case 'â…£çº§':case 'è“è‰²':return 'primary'; 	default:return 'green';}},			quickCall(call,s2,s3){	 quickCall(call.tel,s2,s3);},  				videoCall(call,s2,s3){   videoCall(call.tel,s2,s3);},  }, }</script>